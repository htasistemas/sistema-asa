{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nexport let BackupPageComponent = class BackupPageComponent {\n  constructor(backupService) {\n    this.backupService = backupService;\n    this.carregandoBackup = false;\n    this.carregandoRestauracao = false;\n    this.mensagem = '';\n    this.tipoMensagem = '';\n    this.arquivoSelecionado = null;\n  }\n  selecionarArquivo(evento) {\n    const input = evento.target;\n    const arquivo = input?.files?.[0] || null;\n    this.arquivoSelecionado = arquivo;\n  }\n  baixarBackup() {\n    this.limparMensagem();\n    this.carregandoBackup = true;\n    this.backupService.baixarBackup().subscribe({\n      next: blob => {\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `backup-asa-${this.gerarData()}.sql`;\n        link.click();\n        URL.revokeObjectURL(url);\n        this.carregandoBackup = false;\n        this.definirMensagem('Backup gerado com sucesso.', 'sucesso');\n      },\n      error: () => {\n        this.carregandoBackup = false;\n        this.definirMensagem('Nao foi possivel gerar o backup.', 'erro');\n      }\n    });\n  }\n  restaurarBackup() {\n    this.limparMensagem();\n    if (!this.arquivoSelecionado) {\n      this.definirMensagem('Selecione um arquivo de backup para restaurar.', 'erro');\n      return;\n    }\n    this.carregandoRestauracao = true;\n    this.backupService.restaurarBackup(this.arquivoSelecionado).subscribe({\n      next: resposta => {\n        this.carregandoRestauracao = false;\n        this.definirMensagem(resposta.mensagem || 'Backup restaurado com sucesso.', 'sucesso');\n      },\n      error: () => {\n        this.carregandoRestauracao = false;\n        this.definirMensagem('Nao foi possivel restaurar o backup.', 'erro');\n      }\n    });\n  }\n  gerarData() {\n    const agora = new Date();\n    const ano = agora.getFullYear();\n    const mes = String(agora.getMonth() + 1).padStart(2, '0');\n    const dia = String(agora.getDate()).padStart(2, '0');\n    const hora = String(agora.getHours()).padStart(2, '0');\n    const minuto = String(agora.getMinutes()).padStart(2, '0');\n    return `${ano}${mes}${dia}-${hora}${minuto}`;\n  }\n  definirMensagem(mensagem, tipo) {\n    this.mensagem = mensagem;\n    this.tipoMensagem = tipo;\n  }\n  limparMensagem() {\n    this.mensagem = '';\n    this.tipoMensagem = '';\n  }\n};\nBackupPageComponent = __decorate([Component({\n  selector: 'app-backup-page',\n  standalone: true,\n  imports: [CommonModule],\n  templateUrl: './backup-page.component.html',\n  styleUrls: ['./backup-page.component.css']\n})], BackupPageComponent);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}