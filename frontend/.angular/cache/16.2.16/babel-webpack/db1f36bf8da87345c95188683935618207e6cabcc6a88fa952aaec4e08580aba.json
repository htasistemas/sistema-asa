{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/unidade.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction UnitsPageComponent_tr_67_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 24)(10, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function UnitsPageComponent_tr_67_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const unidade_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.excluirUnidade(unidade_r3.id));\n    });\n    i0.ɵɵtext(11, \"Excluir\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const unidade_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(unidade_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(unidade_r3.city);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(unidade_r3.director);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(unidade_r3.phone || \"-\");\n  }\n}\nfunction UnitsPageComponent_tr_68_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 29);\n    i0.ɵɵtext(2, \"Nenhuma unidade cadastrada.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UnitsPageComponent_div_69_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 31)(2, \"p\", 32);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function UnitsPageComponent_div_69_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.fecharErro());\n    });\n    i0.ɵɵtext(5, \"Fechar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.mensagemErro);\n  }\n}\nexport let UnitsPageComponent = /*#__PURE__*/(() => {\n  class UnitsPageComponent {\n    constructor(unidadeService) {\n      this.unidadeService = unidadeService;\n      this.unidades = [];\n      this.novaUnidade = {\n        nomeUnidade: '',\n        diretor: '',\n        telefone: '',\n        bairro: '',\n        cidade: '',\n        emailUnidade: '',\n        anoEleicao: undefined\n      };\n      this.mensagemErro = '';\n      this.exibirErro = false;\n    }\n    ngOnInit() {\n      this.carregar();\n    }\n    carregar() {\n      this.unidadeService.listar().subscribe(unidades => this.unidades = unidades);\n    }\n    iniciarNovaUnidade() {\n      this.novaUnidade = {\n        nomeUnidade: '',\n        diretor: '',\n        telefone: '',\n        bairro: '',\n        cidade: '',\n        emailUnidade: '',\n        anoEleicao: undefined\n      };\n    }\n    salvarUnidade() {\n      if (!this.validarCamposObrigatorios()) {\n        this.mostrarErro('Preencha todos os campos obrigatorios antes de salvar.');\n        return;\n      }\n      this.unidadeService.criar(this.novaUnidade).subscribe({\n        next: () => {\n          this.iniciarNovaUnidade();\n          this.carregar();\n        },\n        error: () => this.mostrarErro('Nao foi possivel salvar a unidade. Tente novamente.')\n      });\n    }\n    excluirUnidade(id) {\n      this.unidadeService.excluir(id).subscribe({\n        next: () => this.carregar(),\n        error: () => this.mostrarErro('Nao foi possivel excluir a unidade.')\n      });\n    }\n    validarCamposObrigatorios() {\n      return !!(this.novaUnidade.nomeUnidade && this.novaUnidade.diretor && this.novaUnidade.cidade && this.novaUnidade.anoEleicao);\n    }\n    mostrarErro(mensagem) {\n      this.mensagemErro = mensagem;\n      this.exibirErro = true;\n    }\n    fecharErro() {\n      this.exibirErro = false;\n    }\n    static {\n      this.ɵfac = function UnitsPageComponent_Factory(t) {\n        return new (t || UnitsPageComponent)(i0.ɵɵdirectiveInject(i1.UnidadeService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UnitsPageComponent,\n        selectors: [[\"app-units-page\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 70,\n        vars: 7,\n        consts: [[1, \"paginaCadastroUnidade\"], [1, \"topoPagina\"], [1, \"identificadorModulo\"], [1, \"tituloPagina\"], [1, \"subtituloPagina\"], [1, \"barraAcoes\"], [\"type\", \"button\", 1, \"botaoAcao\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"iconeAcao\"], [\"type\", \"button\", 1, \"botaoAcao\", \"botaoPrimario\", 3, \"click\"], [1, \"cartaoFormulario\"], [1, \"tituloSecao\"], [1, \"formularioUnidade\"], [1, \"linhaFormulario\"], [\"for\", \"nomeUnidade\", 1, \"rotuloCampo\"], [1, \"campoObrigatorio\"], [\"id\", \"nomeUnidade\", \"name\", \"nomeUnidade\", \"type\", \"text\", \"placeholder\", \"Digite o nome completo\", \"required\", \"\", 1, \"campoTexto\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"diretorUnidade\", 1, \"rotuloCampo\"], [\"id\", \"diretorUnidade\", \"name\", \"diretorUnidade\", \"type\", \"text\", \"placeholder\", \"Informe o diretor responsavel\", \"required\", \"\", 1, \"campoTexto\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"cidadeUnidade\", 1, \"rotuloCampo\"], [\"id\", \"cidadeUnidade\", \"name\", \"cidadeUnidade\", \"type\", \"text\", \"placeholder\", \"Digite a cidade\", \"required\", \"\", 1, \"campoTexto\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"telefoneUnidade\", 1, \"rotuloCampo\"], [\"id\", \"telefoneUnidade\", \"name\", \"telefoneUnidade\", \"type\", \"text\", \"placeholder\", \"(00) 00000-0000\", 1, \"campoTexto\", 3, \"ngModel\", \"ngModelChange\"], [1, \"cartaoTabela\"], [1, \"tabelaUnidades\"], [1, \"colunaAcoes\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"class\", \"popupErro\", \"role\", \"alert\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"botaoLink\", 3, \"click\"], [\"colspan\", \"5\", 1, \"linhaVazia\"], [\"role\", \"alert\", 1, \"popupErro\"], [1, \"conteudoErro\"], [1, \"mensagemErro\"]],\n        template: function UnitsPageComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"span\", 2);\n            i0.ɵɵtext(3, \"Cadastro\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"h2\", 3);\n            i0.ɵɵtext(5, \"Cadastro da Unidade\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"p\", 4);\n            i0.ɵɵtext(7, \"Gerencie as informacoes basicas das unidades ASA.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"div\", 5)(9, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function UnitsPageComponent_Template_button_click_9_listener() {\n              return ctx.iniciarNovaUnidade();\n            });\n            i0.ɵɵelementStart(10, \"span\", 7);\n            i0.ɵɵtext(11, \"+\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"span\");\n            i0.ɵɵtext(13, \"Novo\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(14, \"button\", 8);\n            i0.ɵɵlistener(\"click\", function UnitsPageComponent_Template_button_click_14_listener() {\n              return ctx.salvarUnidade();\n            });\n            i0.ɵɵelementStart(15, \"span\", 7);\n            i0.ɵɵtext(16, \"\\u2713\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"span\");\n            i0.ɵɵtext(18, \"Salvar\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(19, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function UnitsPageComponent_Template_button_click_19_listener() {\n              return ctx.carregar();\n            });\n            i0.ɵɵelementStart(20, \"span\", 7);\n            i0.ɵɵtext(21, \"\\u27F3\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"span\");\n            i0.ɵɵtext(23, \"Atualizar\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(24, \"div\", 9)(25, \"h3\", 10);\n            i0.ɵɵtext(26, \"Dados da unidade\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"form\", 11)(28, \"div\", 12)(29, \"label\", 13);\n            i0.ɵɵtext(30, \"Nome da unidade \");\n            i0.ɵɵelementStart(31, \"span\", 14);\n            i0.ɵɵtext(32, \"*\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(33, \"input\", 15);\n            i0.ɵɵlistener(\"ngModelChange\", function UnitsPageComponent_Template_input_ngModelChange_33_listener($event) {\n              return ctx.novaUnidade.name = $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(34, \"div\", 12)(35, \"label\", 16);\n            i0.ɵɵtext(36, \"Diretor \");\n            i0.ɵɵelementStart(37, \"span\", 14);\n            i0.ɵɵtext(38, \"*\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(39, \"input\", 17);\n            i0.ɵɵlistener(\"ngModelChange\", function UnitsPageComponent_Template_input_ngModelChange_39_listener($event) {\n              return ctx.novaUnidade.director = $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(40, \"div\", 12)(41, \"label\", 18);\n            i0.ɵɵtext(42, \"Cidade \");\n            i0.ɵɵelementStart(43, \"span\", 14);\n            i0.ɵɵtext(44, \"*\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(45, \"input\", 19);\n            i0.ɵɵlistener(\"ngModelChange\", function UnitsPageComponent_Template_input_ngModelChange_45_listener($event) {\n              return ctx.novaUnidade.city = $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(46, \"div\", 12)(47, \"label\", 20);\n            i0.ɵɵtext(48, \"Telefone\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(49, \"input\", 21);\n            i0.ɵɵlistener(\"ngModelChange\", function UnitsPageComponent_Template_input_ngModelChange_49_listener($event) {\n              return ctx.novaUnidade.phone = $event;\n            });\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(50, \"div\", 22)(51, \"h3\", 10);\n            i0.ɵɵtext(52, \"Unidades ASA\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(53, \"table\", 23)(54, \"thead\")(55, \"tr\")(56, \"th\");\n            i0.ɵɵtext(57, \"Unidade\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(58, \"th\");\n            i0.ɵɵtext(59, \"Cidade\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(60, \"th\");\n            i0.ɵɵtext(61, \"Diretor\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(62, \"th\");\n            i0.ɵɵtext(63, \"Telefone\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(64, \"th\", 24);\n            i0.ɵɵtext(65, \"Acoes\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(66, \"tbody\");\n            i0.ɵɵtemplate(67, UnitsPageComponent_tr_67_Template, 12, 4, \"tr\", 25);\n            i0.ɵɵtemplate(68, UnitsPageComponent_tr_68_Template, 3, 0, \"tr\", 26);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(69, UnitsPageComponent_div_69_Template, 6, 1, \"div\", 27);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(33);\n            i0.ɵɵproperty(\"ngModel\", ctx.novaUnidade.name);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngModel\", ctx.novaUnidade.director);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngModel\", ctx.novaUnidade.city);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.novaUnidade.phone);\n            i0.ɵɵadvance(18);\n            i0.ɵɵproperty(\"ngForOf\", ctx.unidades);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.unidades.length === 0);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.exibirErro);\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, i2.NgIf, FormsModule, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n        styles: [\".paginaCadastroUnidade[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;color:#1f2a1f}.topoPagina[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.identificadorModulo[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase;letter-spacing:.08em;color:#7b857b}.tituloPagina[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700}.subtituloPagina[_ngcontent-%COMP%]{margin:0;color:#5f6b5f}.barraAcoes[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.botaoAcao[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;border:1px solid #d8ddd8;background-color:#fff;color:#2e3a2e;border-radius:10px;padding:10px 16px;font-weight:600;cursor:pointer}.botaoAcao[_ngcontent-%COMP%]:hover{border-color:#2f7a45}.botaoPrimario[_ngcontent-%COMP%]{background-color:#2f7a45;color:#fff;border-color:#2f7a45}.iconeAcao[_ngcontent-%COMP%]{width:20px;height:20px;display:inline-flex;align-items:center;justify-content:center;font-size:14px;border-radius:6px;background-color:#2f7a451a}.cartaoFormulario[_ngcontent-%COMP%], .cartaoTabela[_ngcontent-%COMP%]{background-color:#fff;border-radius:16px;border:1px solid #e1e5e1;padding:20px;box-shadow:0 6px 16px #0000000a}.tituloSecao[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;font-weight:700}.formularioUnidade[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}.linhaFormulario[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.rotuloCampo[_ngcontent-%COMP%]{font-size:13px;color:#3a463a}.campoObrigatorio[_ngcontent-%COMP%]{color:#b91c1c}.campoTexto[_ngcontent-%COMP%]{border:1px solid #d8ddd8;border-radius:10px;padding:10px 12px;font-size:14px}.campoTexto[_ngcontent-%COMP%]:focus{outline:none;border-color:#2f7a45;box-shadow:0 0 0 3px #2f7a4526}.tabelaUnidades[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.tabelaUnidades[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabelaUnidades[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border-bottom:1px solid #ecefec}.colunaAcoes[_ngcontent-%COMP%]{text-align:right}.botaoLink[_ngcontent-%COMP%]{background:none;border:none;color:#b91c1c;cursor:pointer;font-weight:600}.linhaVazia[_ngcontent-%COMP%]{text-align:center;color:#7b857b;padding:16px}.popupErro[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background-color:#00000059;padding:20px}.conteudoErro[_ngcontent-%COMP%]{background-color:#fff;border-radius:16px;padding:24px;max-width:360px;width:100%;text-align:center;display:flex;flex-direction:column;gap:16px}.mensagemErro[_ngcontent-%COMP%]{margin:0;color:#b91c1c;font-weight:600}@media (max-width: 900px){.barraAcoes[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}\"]\n      });\n    }\n  }\n  return UnitsPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}